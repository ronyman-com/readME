import{initTheme as e,switchTheme as t}from"../../../../themes/installed/default/readme-theme/theme.js";async function i(t){try{const i=localStorage.getItem("theme-preference")||"system",a=t||i,r=await e(a);return c(r.identifier),r}catch(e){throw console.error("Theme initialization failed:",e),e}}async function a(e){try{const i=await t(e);return c(i.identifier),i}catch(e){throw console.error("Theme switch failed:",e),e}}function r(){const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";localStorage.setItem("theme-preference",e),a(e)}function c(e){document.documentElement.setAttribute("data-theme",e);const t=document.querySelector("[data-theme-toggle]");t&&(t.innerHTML="dark"===e?"☀️":"🌙",t.setAttribute("aria-label",`Switch to ${"dark"===e?"light":"dark"} theme`))}document.addEventListener("DOMContentLoaded",(async()=>{try{const e=await i();console.log(`Theme initialized in ${e.name} mode`);const t=document.querySelector("[data-theme-toggle]");t&&t.addEventListener("click",r);const c=window.matchMedia("(prefers-color-scheme: dark)"),n=e=>{const t=e.matches?"dark":"light";"system"===localStorage.getItem("theme-preference")&&a(t)};c.addEventListener("change",n),function(){try{document.querySelectorAll(".sidebar-item").forEach((e=>{if(e.querySelector(".sidebar-submenu")){const t=e.querySelector(".sidebar-link");t.addEventListener("click",(i=>{(i.target.closest(".sidebar-caret")||i.currentTarget===t)&&(i.preventDefault(),e.classList.toggle("expanded"))}))}})),function(){const e=window.location.pathname;document.querySelectorAll(".sidebar-link, .sidebar-sublink").forEach((t=>{const i=t.getAttribute("href");if(i===e||"/"!==i&&e.startsWith(i)){t.classList.add("active");let e=t.closest(".sidebar-submenu");for(;e;)e.previousElementSibling.classList.add("active"),e.closest(".sidebar-item").classList.add("expanded"),e=e.closest(".sidebar-submenu")}}))}()}catch(e){console.error("Sidebar initialization failed:",e)}}(),function(){const e=document.querySelector(".mobile-sidebar-toggle"),t=document.querySelector(".sidebar"),i=document.querySelector(".mobile-sidebar-overlay");e&&t&&(e.addEventListener("click",(()=>{t.classList.toggle("active"),i?.classList.toggle("active")})),i?.addEventListener("click",(()=>{t.classList.remove("active"),i.classList.remove("active")})))}()}catch(e){console.error("Initialization error:",e),document.documentElement.setAttribute("data-theme","light")}}));export{i as initTheme,a as switchTheme,r as toggleTheme};